<!-- templates/memo_list.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë©”ëª¨ ëª©ë¡</title>
</head>
<body>
  <h1>ë©”ëª¨ ëª©ë¡</h1>

  <p>
    <a href="{{ url_for('memo_new') }}">â• ìƒˆ ë©”ëª¨ ì‘ì„±</a>
    | <a href="{{ url_for('index') }}">ğŸ  ë©”ì¸ìœ¼ë¡œ</a>
  </p>

  <!-- ğŸ” ê²€ìƒ‰ í¼ (GET ë°©ì‹) -->
  <form method="get" action="{{ url_for('memo_list') }}">
    <input
      type="text"
      name="q"
      placeholder="ê²€ìƒ‰í•  í‚¤ì›Œë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”"
      value="{{ q }}"
    >
    <button type="submit">ê²€ìƒ‰</button>
    {% if q %}
      <a href="{{ url_for('memo_list') }}">ê²€ìƒ‰ ì´ˆê¸°í™”</a>
    {% endif %}
  </form>

  <hr>

  {% if memos|length == 0 %}
    {% if q %}
      <p>"{{ q }}" ì— ëŒ€í•œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
    {% else %}
      <p>ì €ì¥ëœ ë©”ëª¨ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endif %}
  {% else %}
    <ul>
      {% for memo in memos %}
        <li>
          <strong>{{ memo.text }}</strong><br>
          ì‘ì„±ì¼: {{ memo.created_at }}
          {% if memo.updated_at %}
            (ìˆ˜ì •: {{ memo.updated_at }})
          {% endif %}
          <br>

          <!-- ìˆ˜ì • ë²„íŠ¼ -->
          <a href="{{ url_for('memo_edit', memo_id=memo._id) }}">ìˆ˜ì •</a>

          <!-- ì‚­ì œ ë²„íŠ¼ (POST ìš”ì²­) -->
          <form
            action="{{ url_for('memo_delete', memo_id=memo._id) }}"
            method="post"
            style="display:inline"
            onsubmit="return confirm('ì •ë§ ì‚­ì œí• ê¹Œìš”?');"
          >
            <button type="submit">ì‚­ì œ</button>
          </form>
        </li>
        <hr>
      {% endfor %}
    </ul>
  {% endif %}
</body>
</html>
